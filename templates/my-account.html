{% extends 'base.html' %}

{% block title %}Homepage{% endblock %}

{% block content %}

<!-- <p id="user-email">{{ user.email }} you are now logged in.</p>
<p>{{ user.trackings }}</p> -->
<!-- TODO: On click: prompt to ask if user has saved changes -->
<form action="/logout" method="get" >
    <button type="submit" >Log Out</button>
    </form>

<form action="/tracking-page" method="get" >
    <button type="submit" >Back to tracking page</button>
    </form>


<div class="table-users" id="table-users">
    <div class="header"><h1>Missing Children Notes</h1></div>


    <table id="tracking-table" cellspacing="0">
       <tr>
          <th id="tracking_id">Tracking ID</th>
          <th id="date_time">Date Time</th>
          <th id="notes" width="400">Notes</th>
       </tr>
       
       <tr>
        {%for tracking in user.trackings | sort(attribute='tracking_id', reverse = True) %}
          <td id="{{ tracking.tracking_id }}" class="tracking-id" width="200">{{ tracking.tracking_id }}</td>
          <td width="200">{{ tracking.date_time }}</td>

          <form action="/update_tracking" method="POST">
          <input type="hidden" id="tracking_id" name="tracking_id" value="{{ tracking.tracking_id }}">
          <td width="350"><textarea name="note" rows="8" cols="50">{{ tracking.note }}</textarea></td>
          <td width="200"><button type="submit">Update/Save</button></td></form>
          <!-- TODO: Create delete route -->
          <form action="/delete_tracking" method="POST">
          <input type="hidden" name="tracking_id" value="{{ tracking.tracking_id }}">
          <td width="200"><button id="delete-tracking" type="submit">Delete</button></a></td></form>
        </tr>
       {% endfor %}
 
    </table>
    <!-- <button type="submit" action="/logout">Log Out</button> -->
 </div>

 <p>Thank you for supporting the beta version of The Lost Children</p>
 <p>You might also want to join the active <a href="https://www.websleuths.com/forums/forums/missing-persons-discussion.60/">Websleuths</a>community.</p>
<!-- TODO: Flash messages for update and pop up confirmation for delete-->
{% endblock %}
